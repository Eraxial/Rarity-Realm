<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link rel="shortcut icon" href="/images/assets/icon2.png" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="/stylesheets/admin.css">
    <link rel="stylesheet" href="/stylesheets/general.css">
    <link rel="stylesheet" href="/stylesheets/forms.css">
  </head>
  <body>
    <header>
      <%- include('./includes/navbar.ejs') %>
    </header>
    <main>
      <section class="head mt-5">
        <h1 class="py-5 text-center">Admin</h1>
      </section>
      <ul class="nav nav-pills pb-3 d-flex gap-5 justify-content-center" id="pills-tab" role="tablist">
        <li class="nav-item" role="presentation">
          <button class="active button" id="pills-home-tab" data-bs-toggle="pill" data-bs-target="#collectors" type="button" role="tab" aria-controls="pills-home" aria-selected="true">Collectors</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="button" id="pills-profile-tab" data-bs-toggle="pill" data-bs-target="#categories" type="button" role="tab" aria-controls="pills-profile" aria-selected="false">Categories</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="button" id="pills-contact-tab" data-bs-toggle="pill" data-bs-target="#collections" type="button" role="tab" aria-controls="pills-contact" aria-selected="false">Collections</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="button" id="pills-disabled-tab" data-bs-toggle="pill" data-bs-target="#items" type="button" role="tab" aria-controls="pills-disabled" aria-selected="false" >Items</button>
        </li>
      </ul>
      <section >
        <div class="tab-content" id="pills-tabContent">
          <div class="tab-pane fade show active" id="collectors" role="tabpanel" aria-labelledby="pills-home-tab" tabindex="0">
            
            <section class="head w-100">
              <h2 class="text-center">Collectors</h2>
            </section>
            <%- include('./includes/filterCollector.ejs') %>
            <div style=overflow-x:auto;>
              <table class="mx-auto">
                <thead>
                  <tr>
                    <th>Photo</th>
                    <th>ID</th>
                    <th>Nick</th>
                    <th>Name</th>
                    <th>Last Name</th>
                    <th>Phone</th>
                    <th>Interest</th>
                    <th>Delete</th>
                    <th>Edit</th>
                  </tr>
                </thead>
                <tbody>
                  <% resultCollector.forEach(coll => { %>
                    <tr>
                      <td><img class="rounded-circle" src="/images/collectors/<%= coll.collector_img %>" alt=""></td>
                      <td><%= coll.collector_id %></td>
                      <td><%= coll.nick %></td>
                      <td><%= coll.name %></td>
                      <td><%= coll.last_name %></td>
                      <td><%= coll.phone %></td>
                      <td><%= coll.interest %></td>
                      <td class="text-center"><img type="button" onclick="window.location.href='/admin/eraseCollector/<%= coll.collector_id %>'" class="icon" src="/images/assets/delete.png" alt=""></td>
                      <td class="text-center"><img type="button" onclick="window.location.href='/admin/editCollector/<%= coll.collector_id %>'" class="icon" src="/images/assets/edit.png" alt=""></td>
                    </tr>
                  <% }) %>
                </tbody>
              </table>
            </div>
          </div>

          <div class="tab-pane fade" id="categories" role="tabpanel" aria-labelledby="pills-profile-tab" tabindex="0">
            
            <section class="head">
              <h2 class="text-center">Categories</h2>
            </section>
            <%- include('./includes/filterCategory.ejs') %>
            <div style=overflow-x:auto; class="text-center">
              <button type="button" class="fs-6" data-bs-toggle="modal" data-bs-target="#addCategory">
                Add Category
              </button>
              <table class="mx-auto">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Delete</th>
                    <th>Edit</th>
                  </tr>
                </thead>
                <tbody>
                  <% resultCategories.forEach(cat => { %>
                    <tr>
                      <td><%= cat.category_id %></td>
                      <td><%= cat.category_name %></td>
                      <td class="text-center"><img type="button" onclick="window.location.href='/admin/eraseCategory/<%= cat.category_id %>'" class="icon" src="/images/assets/delete.png" alt=""></td>
                      <td class="text-center"><img type="button" onclick="window.location.href='/admin/editCategory/<%= cat.category_id %>'" class="icon" src="/images/assets/edit.png" alt=""></td>
                    </tr>
                  <% }) %>
                </tbody>
              </table>
              
            </div>
          </div>

          <div class="tab-pane fade" id="collections" role="tabpanel" aria-labelledby="pills-contact-tab" tabindex="0">

            <section class="head w-100">
              <h2 class="text-center">Collections</h2>
            </section>
            <%- include('./includes/filterCollection.ejs') %>
            <div style=overflow-x:auto;>
              <table class="mx-auto">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th >Description</th>
                    <th>Collector ID</th>
                    <th>Collector Nick</th>
                    <th>Delete</th>
                    <th>Edit</th>
                  </tr>
                </thead>
                <tbody>
                  <% resultCollection.forEach(collection => { %>
                    <tr>
                      <td><%= collection.collection_id %></td>
                      <td><%= collection.collection_name %></td>
                      <td style="min-width: 500px;"><%= collection.collection_description %></td>
                      <td><%= collection.collector_id %></td>
                      <td><%= collection.nick %></td>
                      <td class="text-center"><img type="button" onclick="window.location.href='/admin/eraseCollection/<%= collection.collection_id %>'" class="icon" src="/images/assets/delete.png" alt=""></td>
                      <td class="text-center"><img type="button" onclick="window.location.href='/admin/editCollection/<%= collection.collection_id %>'" class="icon" src="/images/assets/edit.png" alt=""></td>
                    </tr>
                  <% }) %>
                </tbody>
              </table>
            </div>

          </div>
          <div class="tab-pane fade" id="items" role="tabpanel" aria-labelledby="pills-disabled-tab" tabindex="0">

            <section class="head w-100">
              <h2 class="text-center">Items</h2>
            </section>
            <%- include('./includes/filterItem.ejs') %>
            <div style="overflow-x:auto;">
              <table class="mx-auto">
                <thead>
                  <tr>
                    <th>Photo</th>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Year of Purchase</th>
                    <th>Description</th>
                    <th>Collector Nick</th>
                    <th>Collection</th>
                    <th>Category</th>
                  </tr>
                </thead>
                <tbody>
                  <% resultItem.forEach(item => { %>
                    <tr>
                      <td><img class="rounded-circle" src="/images/items/<%= item.item_img %>" alt=""></td>
                      <td><%= item.item_id %></td>
                      <td><%= item.item_name %></td>
                      <td><%= item.item_purchaseyear %></td>
                      <td style="min-width: 500px;"><%= item.item_description %></td>
                      <td><%= item.nick %></td>
                      <td><%= item.collection_name %></td>
                      <td><%= item.category_name %></td>
                      <td class="text-center"><img type="button" onclick="window.location.href='/admin/eraseItem/<%= item.item_id %>'" class="icon" src="/images/assets/delete.png" alt=""></td>
                      <td class="text-center"><img type="button" onclick="window.location.href='/collectors/<%= item.collector_id%>/editItem/<%= item.item_id %>'" class="icon" src="/images/assets/edit.png" alt=""></td>
                    </tr>
                  <% }) %>
                </tbody>
              </table>
            </div>

          </div>
        </div>
      </section>

      <!-- Modal -->
      <div class="modal fade" id="addCategory" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="exampleModalLabel">Add Category</h1>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <form class="mx-auto" action="/admin/addCategory" method="post">
                <label >
                  Name
                  <input type="text" name="name">
                </label>
                <div class="d-flex gap-4">
                  <button class="fs-6">Aceptar</button>
                  <button type="button" class="fs-6"  data-bs-dismiss="modal">Close</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>

    </main>

    

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  </body>
</html>